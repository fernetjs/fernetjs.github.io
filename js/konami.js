var konamiFernetJS=function(t){var e,n,o,r,a,d=!1,s=10,i=0,l=t(window),h=[],c={up:38,down:40,left:37,right:39},p=function(){var t=o.position().top,e=o.position().left,n=l.height()/2,a=l.scrollTop()+l.height()/2;h.has(c.up)&&(i=0,t>0&&(t-=s)),h.has(c.right)&&(i=90,e+o.width()<l.width()&&(e+=s)),h.has(c.down)&&(i=180,t+2*o.height()<l.height()+l.scrollTop()&&(t+=s)),h.has(c.left)&&(i=270,e>0&&(e-=s)),h.length>1&&(i=45,h.has(c.up,c.right)?i*=1:h.has(c.right,c.down)?i*=3:h.has(c.down,c.left)?i*=5:h.has(c.left,c.up)&&(i*=7));var d="transform:rotate([d]deg);-ms-transform:rotate([d]deg);-moz-transform:rotate([d]deg);-webkit-transform:rotate([d]deg);-o-transform:rotate([d]deg);";d=d.replace(/\[d\]/g,i),(t>a||a>t)&&l.scrollTop(t-n),o.css("top",t+"px").css("left",e+"px"),r.attr("style",d)},f=function(t){-1===h.indexOf(t.which)&&(h.length>1&&h.shift(),h.push(t.which)),a&&a.animate({opacity:0},1e3,function(){a&&a.remove(),a=null})},u=function(t){var e=h.indexOf(t.which);-1!==e&&h.splice(e,1)},v=function(){r=t("<div>").addClass("fernet-capita"),a=t("<div>").addClass("legend").text("<- Fernet volador"),o=t("<div>").addClass("bottle-wrap").append(r).append(a).css("left",l.width()/3+"px").css("top",l.height()/2+l.scrollTop()+"px").appendTo("body"),t("body, html").css("overflow","hidden"),h.has=function(){for(var t=0;t<arguments.length;t++)if(-1===h.indexOf(arguments[t]))return!1;return!0},t(document).bind("keydown",f),t(document).bind("keyup",u),clearInterval(e),clearInterval(n),e=setInterval(p,50);var d=!1;n=setInterval(function(){d=!d,d?r.addClass("x"):r.removeClass("x")},200)},g=function(){t(document).unbind("keydown",f),t(document).unbind("keyup",u),t("body, html").css("overflow","auto"),clearInterval(e),clearInterval(n),o.empty().remove(),h=[],d=!1};return{run:function(){d||(d=!0,v())},stop:g}}(Zepto);
